---
sidebar: sidebar 
permalink: concept_log_explorer.html 
keywords: logs, monitors, alerts, EMS, 
summary: ログ エクスプローラーは、さまざまなシステム ログを通じて問題を調査するための強力なツールです。 
---
= ログエクスプローラー
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Data Infrastructure Insightsログ エクスプローラーは、システム ログを照会するための強力なツールです。調査に役立つだけでなく、モニターにログ クエリを保存して、特定のログ トリガーがアクティブ化されたときにアラートを提供することもできます。

ログの調査を開始するには、[*ログ クエリ] > [+新しいログ クエリ]* をクリックします。

リストから利用可能なログを選択します。

image:LogExplorer_2022.png["ログを選択してください"]


NOTE: クエリに使用できるログの種類は、環境によって異なる場合があります。今後、ログ タイプが追加される可能性もあります。

フィルターを設定して、クエリの結果をさらに絞り込むことができます。たとえば、失敗を示すすべてのログ メッセージを検索するには、「failed」という単語を含む _Messages_ のフィルターを設定します。


TIP: フィルター フィールドに目的のテキストを入力し始めると、入力した文字列を含むワイルドカード検索を作成するようにData Infrastructure Insightsから要求されます。

結果はグラフで表示され、表示される各期間のログのインスタンスの数が表示されます。グラフの下にはログエントリ自体が表示されます。グラフとエントリは、選択した時間範囲に基づいて自動的に更新されます。

image:LogExplorer_QueryForFailed.png["フィルターを表示するクエリの例"]



== フィルタ



=== 含める/除外する

ログをフィルタリングするときに、入力した文字列を *含める* (つまり、「フィルタリング対象」) か *除外する* かを選択できます。除外された文字列は、完了したフィルターに「NOT <文字列>」と表示されます。

image:Log_Advanced_Query_Filter_Exclude.png["ログフィルタに除外オプションが表示されている"]

ワイルドカードまたは式 (例: NOT、OR、「なし」など) に基づくフィルターは、フィルター フィールドに濃い青色で表示されます。リストから直接選択した項目は水色で表示されます。


NOTE: いつでも、[ログ モニターの作成] をクリックして、現在のフィルターに基づいて新しいモニターを作成できます。



=== 高度なフィルタリング

クエリまたはダッシュボード ウィジェットでテキストまたはリストの値をフィルター処理する場合、入力を開始すると、現在のテキストに基づいて *ワイルドカード フィルター* を作成するオプションが表示されます。このオプションを選択すると、ワイルドカード式に一致するすべての結果が返されます。  NOT、AND、OR を使用して式を作成したり、「なし」オプションを選択して null 値をフィルターしたりすることもできます。


NOTE: フィルタリングを構築するときは、必ず早めに頻繁にクエリを保存してください。高度なクエリは「自由形式」の文字列入力であり、ビルド時に解析エラーが発生する可能性があります。

_logs.kubernetes.event_ ログの高度なクエリのフィルタリングされた結果を示すこの画面イメージをご覧ください。このページでは多くのことが行われており、画像の下に説明があります。

image:Log_Advanced_Query_ScreenExplained.png["高度なクエリ画面の説明"]

. この高度なクエリ文字列は、次のものをフィルターします。
+
** 「failed」という単語を含む _reason_ を持つログ エントリをフィルターしますが、「FailedMount」という具体的な理由を持つものはフィルターしません。
** 「monitoring」という単語を含む _metadata.namespace_ も含むエントリをすべて含めますが、「cm-monitoring」または「eg-monitoring」の特定の名前空間は除外します。
+
上記の場合、「cm-monitoring」と「eg-monitoring」の両方にダッシュ (「-」) が含まれているため、文字列を二重引用符で囲む必要があります。そうしないと、解析エラーが表示されます。ダッシュやスペースなどを含まない文字列は引用符で囲む必要はありません。疑問がある場合は、文字列を引用符で囲んでみてください。



. 現在のフィルターの結果（「フィルター条件」値と高度なクエリ フィルターを含む）が結果リストに表示されます。リストは表示されている列ごとに並べ替えることができます。追加の列を表示するには、「歯車」アイコンを選択します。
. グラフは拡大され、特定の期間内に発生したログ結果のみが表示されます。ここで表示される時間範囲は、現在のズーム レベルを反映しています。  _ズームのリセット_ ボタンを選択すると、ズーム レベルが現在のData Infrastructure Insights の時間範囲に戻ります。
. グラフの結果は、_source_ フィールドごとにグループ化されています。グラフには、各列の結果が色別にグループ化されて表示されます。グラフ内の列にマウスを移動すると、特定のエントリに関する詳細が表示されます。
+
image:Log_Advanced_Query_Group_Detail.png["グループ化されたホバー詳細"]





==== フィルターの調整

フィルターを絞り込むには、次のものを使用できます。

|===


| フィルタ | 何をするのか 


| *（アスタリスク） | あらゆるものを検索できます 


| ? （疑問符） | 特定の文字数を検索できます 


| または | 複数のエンティティを指定できる 


| ない | 検索結果からテキストを除外できます 


| _なし_ | すべてのフィールドでNULL値を検索します 


| ない * | テキストのみのフィールドでNULL値を検索します 
|===
フィルタ文字列を二重引用符で囲むと、Insight は最初の引用符と最後の引用符の間のすべてを完全一致として扱います。引用符内の特殊文字または演算子はリテラルとして扱われます。たとえば、「*」でフィルタリングすると、文字通りのアスタリスクである結果が返されます。この場合、アスタリスクはワイルドカードとして扱われません。演算子 OR と NOT も、二重引用符で囲むとリテラル文字列として扱われます。

シンプルなフィルターと高度なクエリ フィルターを組み合わせることができます。結果のフィルターは 2 つのフィルターの「AND」になります。



=== チャートの凡例

グラフの下の「凡例」にもいくつか驚くべき点があります。凡例に表示される各結果 (現在のフィルターに基づく) に対して、その行の結果のみを表示する (フィルターの追加) か、その行に該当しない結果を表示する (除外フィルターの追加) かを選択できます。グラフとログ エントリ リストが更新され、選択内容に基づいて結果が表示されます。このフィルタリングを削除するには、凡例を再度開き、[X] を選択して凡例ベースのフィルタをクリアします。

image:Log_Advanced_Query_Legend.png["最初の結果に「フィルタを追加」が表示されている高度なクエリの凡例"]



== ログの詳細

リスト内のログ エントリの任意の場所をクリックすると、そのエントリの詳細ペインが開きます。ここでは、イベントに関する詳細情報を調べることができます。

「フィルターを追加」をクリックすると、選択したフィールドが現在のフィルターに追加されます。ログ エントリ リストは新しいフィルターに基づいて更新されます。

一部のフィールドはフィルターとして追加できないことに注意してください。その場合、[フィルターの追加] アイコンは使用できません。

image:LogExplorer_DetailPane.png["ログエントリ詳細ペイン"]



== トラブルシューティング

ここでは、ログ クエリに関する問題のトラブルシューティングに関する提案を紹介します。

|===


| *問題：* | *これを試してみてください:* 


| ログクエリに「デバッグ」メッセージが表示されない | デバッグ ログ メッセージは収集されません。必要なメッセージをキャプチャするには、関連するメッセージの重大度を _informational、error、alert、emergency、または _notice_ レベルに変更します。 
|===