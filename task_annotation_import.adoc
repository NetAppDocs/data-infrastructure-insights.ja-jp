---
sidebar: sidebar 
permalink: task_annotation_import.html 
keywords: annotations, import, api 
summary: Data Infrastructure Insights API を使用して、注釈とアプリケーションをインポートできます。 
---
= 注釈のインポート
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Data Infrastructure Insights には、CSV ファイルから注釈またはアプリケーションをインポートし、指定したオブジェクトに割り当てるための API が含まれています。


NOTE: Data Infrastructure Insights API は、* Data Infrastructure Insights Premium Edition* で利用できます。



== インポート

*管理 > APIアクセス*リンクにはlink:API_Overview.html["ドキュメント"]*Assets/Import* API 用。このドキュメントには、.CSV ファイル形式に関する情報が含まれています。

image:api_assets_import.png["インポートAPI"]



== .CSVファイル形式

CSV ファイルの一般的な形式は次のとおりです。ファイルの最初の行はインポート フィールドを定義し、フィールドの順序を指定します。その後に、注釈またはアプリケーションごとに個別の行が続きます。すべてのフィールドを定義する必要はありません。ただし、後続の注釈行は定義行と同じ順序に従う必要があります。

 [Object Type] , [Object Name or ID] , Annotation Type [, Annotation Type,  ...] [, Application] [, Tenant] [, Line_Of_Business] [, Business_Unit] [, Project]
.CSV ファイルの例については、API ドキュメントを参照してください。

API Swagger 自体から .CSV ファイルから注釈をインポートして割り当てることができます。使用するファイルを選択して、[実行] ボタンをクリックするだけです。

image:api_assets_import_assign.png["インポートと割り当て"]



== インポート動作

インポート操作中、インポートされるオブジェクトとオブジェクト タイプに応じて、データが追加、結合、または置換されます。インポート中は、次の動作に注意してください。

* ターゲット システムに同じ名前の注釈またはアプリケーションが存在しない場合は、注釈またはアプリケーションを追加します。
* 注釈タイプがリストであり、ターゲット システムに同じ名前の注釈が存在する場合は、注釈をマージします。
* 注釈タイプがリスト以外で、ターゲット システムに同じ名前の注釈が存在する場合は、注釈を置き換えます。
+
注意: ターゲット システムに同じ名前だがタイプが異なる注釈が存在する場合、インポートは失敗します。オブジェクトが失敗した注釈に依存している場合、それらのオブジェクトには不正確な情報や不要な情報が表示される可能性があります。インポート操作が完了したら、すべての注釈の依存関係を確認する必要があります。

* 注釈の値が空の場合、その注釈はオブジェクトから削除されます。継承された注釈は影響を受けません。
* 日付型の注釈値は、ミリ秒単位の Unix 時間として渡す必要があります。
* ボリュームまたは内部ボリュームに注釈を付ける場合、オブジェクト名は「\->」区切り文字を使用したストレージ名とボリューム名の組み合わせになります。例: _<ストレージ名>\-><ボリューム名>_
* オブジェクト名にコンマが含まれている場合は、名前全体を二重引用符で囲む必要があります。例: _"NetApp1,NetApp2"\->023F_
* ストレージ、スイッチ、ポートに注釈を添付する場合、「アプリケーション」列は無視されます。
* テナント、Line_Of_Business、Business_Unit、および/またはプロジェクトによってビジネス エンティティが構成されます。すべてのビジネス エンティティと同様に、いずれかの値が空になる場合があります。


次のオブジェクト タイプに注釈を付けることができます。

|===


| オブジェクトタイプ | 名前またはキー 


| ホスト | id\-><id> または <名前> または <IP> 


| VM | id\-><id> または <名前> 


| ストレージプール | id\-><id> または <ストレージ名>\-><ストレージプール名> 


| 内部ボリューム | id\-><id> または <ストレージ名>\-><内部ボリューム名> 


| Volume | id\-><id> または <ストレージ名>\-><ボリューム名> 


| ストレージ | id\-><id> または <名前> または <IP> 


| スイッチ | id\-><id> または <名前> または <IP> 


| ポート | id\-><id> または <WWN> 


| qtree | id\-><id> または <ストレージ名>\-><内部ボリューム名>\-><Qtree 名> 


| 共有 | id\-><id> または <ストレージ名>\-><内部ボリューム名>\-><共有名>\-><プロトコル>[\-><Qtree 名 (デフォルトの Qtree の場合はオプション)>] 
|===