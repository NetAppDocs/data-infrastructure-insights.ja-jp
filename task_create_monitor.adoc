---
sidebar: sidebar 
permalink: task_create_monitor.html 
keywords: monitors, alerts, log, metric, system-defined, system, metric, 
summary: パフォーマンスやインベントリのしきい値、およびメトリックやログの状態についてアラートを発するモニターを作成します。 
---
= モニターによるアラート
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
インフラストラクチャ リソース全体のパフォーマンスしきい値、ログ イベント、および異常を追跡するようにモニターを構成します。ノードの書き込み遅延、ストレージ容量、アプリケーション パフォーマンスなどのメトリックのカスタム アラートを作成し、そのような条件が満たされたときに通知を受け取ります。

モニターを使用すると、ストレージ、VM、EC2、ポートなどの「インフラストラクチャ」オブジェクトによって生成されたメトリックや、Kubernetes、 ONTAP の高度なメトリック、Telegraf プラグインなどで収集された「統合」データのしきい値を設定できます。これらのメトリック モニターは、警告レベルまたは重大レベルのしきい値を超えたときに警告を発します。

指定されたログ イベントが検出されたときに、警告、重大、または情報レベルのアラートをトリガーするモニターを作成することもできます。

Data Infrastructure Insightsは、link:task_system_monitors.html["システム定義モニター"]環境に応じても同様です。



== セキュリティのベストプラクティス

Data Infrastructure Insightsアラートは、テナント上のデータ ポイントと傾向を強調するように設計されており、 Data Infrastructure Insightsでは、アラートの受信者として有効な電子メール アドレスを入力できます。安全な環境で作業している場合は、通知を受信するユーザーやアラートにアクセスできるユーザーについて特に注意してください。



== メトリックまたはログモニター?

. Data Infrastructure Insightsメニューから、*アラート>モニターの管理*をクリックします。
+
現在構成されているモニターを示すモニター リスト ページが表示されます。

. 既存のモニターを変更するには、リスト内のモニター名をクリックします。
. モニターを追加するには、[*+ モニター*] をクリックします。
+
image:Monitor_log_or_metric.png["システムまたはログモニターを選択"]

+
新しいモニターを追加すると、メトリック モニターまたはログ モニターを作成するように求められます。

+
** _Metric_ はインフラストラクチャまたはパフォーマンス関連のトリガーに関するアラートを監視します
** _Log_ はログ関連のアクティビティに関するアラートを監視します


+
モニターの種類を選択すると、モニター構成ダイアログが表示されます。作成するモニターの種類に応じて構成が異なります。





=== メトリックモニター

. ドロップダウンで、監視するオブジェクト タイプとメトリックを検索して選択します。


フィルターを設定して、監視するオブジェクト属性またはメトリックを絞り込むことができます。

image:MonitorMetricFilter.png["メトリクスフィルタリング"]

統合データ (Kubernetes、 ONTAP Advanced Data など) を操作する場合、メトリック フィルタリングによって、プロットされたデータ シリーズから個別のデータ ポイントや一致しないデータ ポイントが削除されます。これは、インフラストラクチャ データ (ストレージ、VM、ポートなど) の場合、フィルタがデータ シリーズの集計値に対して機能し、チャートからオブジェクト全体が削除される可能性があるのとは異なります。


TIP: 複数条件モニター (例: IOPS > X およびレイテンシ > Y) を作成するには、最初の条件をしきい値として定義し、2 番目の条件をフィルターとして定義します。



==== モニターの条件を定義します。

. 監視するオブジェクトとメトリックを選択した後、警告レベルおよび/または重大レベルのしきい値を設定します。
. _警告_ レベルには、この例では 200 と入力します。この警告レベルを示す破線がサンプルグラフに表示されます。
. _Critical_ レベルには 400 と入力します。この重大レベルを示す破線がサンプルグラフに表示されます。
+
グラフには履歴データが表示されます。グラフ上の警告レベルと重大レベルの線はモニターの視覚的な表現であるため、それぞれのケースでモニターがいつアラートをトリガーするかを簡単に確認できます。

. 発生間隔には、[_15 分_] の期間を [_連続_] を選択します。
+
しきい値を超えた瞬間にアラートをトリガーするか、しきい値が一定期間継続して超過するまで待つかを選択できます。この例では、合計 IOPS が警告レベルまたは重大レベルを超えるたびに警告を受け取るのではなく、監視対象オブジェクトが少なくとも 15 分間、これらのレベルのいずれかを継続して超えた場合にのみ警告を受け取ります。

+
image:Monitor_metric_conditions.png["モニターの条件を定義する"]





==== アラート解決動作を定義する

メトリック モニターのアラートを解決する方法を選択できます。次の 2 つの選択肢が表示されます。

* メトリックが許容範囲に戻ったら解決します。
* 指定された時間 (1 分から 7 日間) にわたってメトリックが許容範囲内にある場合に解決します。




=== ログモニター

*ログ モニター*を作成するときは、まず利用可能なログ リストから監視するログを選択します。上記のように、利用可能な属性に基づいてフィルタリングできます。  1 つ以上の「グループ化」属性を選択することもできます。


NOTE: ログ モニター フィルターは空にできません。

image:Monitor_Group_By_Example.png["監視するログを選択し、フィルターを設定し、必要に応じてグループ化方法を選択します。"]



==== アラートの動作を定義する

上記で定義した条件が 1 回 (つまり即時) 発生したときに、重大度レベルが _Critical_、_Warning_、または _Informational_ であるアラートを送信するモニターを作成するか、条件が 2 回以上発生するまでアラートを待機することができます。



==== アラート解決動作を定義する

ログ モニターのアラートを解決する方法を選択できます。次の 3 つの選択肢が表示されます。

* *すぐに解決*: アラートはすぐに解決され、それ以上のアクションは必要ありません
* *時間に基づいて解決*: 指定された時間が経過するとアラートが解決されます
* *ログ エントリに基づいて解決*: 後続のログ アクティビティが発生すると、アラートが解決されます。たとえば、オブジェクトが「使用可能」としてログに記録される場合などです。


image:Monitor_log_monitor_resolution.png["アラート解決"]



=== 異常検出モニター

. ドロップダウンで、監視するオブジェクト タイプとメトリックを検索して選択します。


フィルターを設定して、監視するオブジェクト属性またはメトリックを絞り込むことができます。

image:AnomalyDetectionMonitorMetricChoosing.png["異常検出のためのメトリクスフィルタリング"]



==== モニターの条件を定義します。

. 監視するオブジェクトとメトリックを選択したら、異常が検出される条件を設定します。
+
** 選択したメトリックが予測された境界を*上回った*場合、*その境界を下回った*場合、または境界を*上回ったか下回った*場合に異常を検出するかどうかを選択します。
** 検出の*感度*を設定します。  *低* (検出される異常が少ない)、*中*、または *高* (検出される異常が多い)。
** アラートを*警告*または*重大*に設定します。
** 必要に応じて、選択したメトリックが設定したしきい値を下回っている場合に異常を無視して、ノイズを減らすこともできます。




image:AnomalyDetectionMonitorDefineConditions.png["異常検出をトリガーする条件の定義"]



=== 通知の種類と受信者を選択する

[チーム通知の設定] セクションでは、電子メールまたは Webhook のどちらでチームに通知するかを選択できます。

image:Webhook_Choose_Monitor_Notification.png["アラート方法を選択"]

*電子メールによるアラート:*

アラート通知の電子メール受信者を指定します。必要に応じて、警告または重大なアラートに異なる受信者を選択できます。

image:email_monitor_alerts.png["メールアラート受信者"]

*Webhook経由のアラート:*

アラート通知用の Webhook を指定します。必要に応じて、警告または重大なアラートに異なる Webhook を選択できます。

image:Webhook_Monitor_Notifications.png["Webhookアラート"]


NOTE: ONTAPデータ コレクターの通知は、クラスタ/データ コレクターに関連する特定のモニター通知よりも優先されます。データ コレクター自体に設定した受信者リストには、データ コレクターのアラートが送信されます。アクティブなデータ コレクター アラートがない場合、モニターによって生成されたアラートが特定のモニター受信者に送信されます。



=== 是正措置または追加情報の設定

*アラートの説明を追加*セクションに入力することで、オプションの説明や追加の洞察や是正アクションを追加できます。説明は最大 1024 文字まで入力でき、アラートとともに送信されます。洞察/是正措置フィールドは最大 67,000 文字まで入力でき、アラート ランディング ページの概要セクションに表示されます。

これらのフィールドでは、アラートを修正または対処するためのメモ、リンク、または手順を入力できます。

任意のオブジェクト属性 (たとえば、ストレージ名) をアラートの説明にパラメータとして追加できます。たとえば、「ボリューム: _%%relatedObject.volume.name%%_、ストレージ: _%%relatedObject.storage.name%%_ の待機時間が長い」のような説明で、ボリューム名とストレージ名のパラメータを設定できます。

image:Monitors_Alert_Description.png["アラートの是正措置と説明"]



=== モニターを保存する

. 必要に応じて、モニターの説明を追加できます。
. モニターにわかりやすい名前を付けて、[*保存*] をクリックします。
+
新しいモニターがアクティブなモニターのリストに追加されます。





== モニターリスト

モニター ページには、現在構成されているモニターが一覧表示され、次の情報が表示されます。

* モニター名
* ステータス
* 監視対象のオブジェクト/メトリック
* モニターの条件


モニターの右側にあるメニューをクリックし、「一時停止」を選択すると、オブジェクト タイプの監視を一時的に一時停止できます。監視を再開する準備ができたら、[*再開*] をクリックします。

メニューから*複製*を選択すると、モニターをコピーできます。その後、新しいモニターを変更し、オブジェクト/メトリック、フィルター、条件、電子メールの受信者などを変更できます。

モニターが不要になった場合は、メニューから*削除*を選択して削除できます。



== モニターグループ

グループ化すると、関連するモニターを表示および管理できます。たとえば、テナント上のストレージ専用のモニター グループを作成したり、特定の受信者リストに関連するモニターを作成したりできます。

image:Monitors_GroupList.png["モニターのグループ化"]

次のモニター グループが表示されます。グループに含まれるモニターの数は、グループ名の横に表示されます。

* *すべてのモニター* にはすべてのモニターが一覧表示されます。
* *カスタム モニター* には、ユーザーが作成したすべてのモニターが一覧表示されます。
* *一時停止中のモニター* には、Data Infrastructure Insightsによって一時停止されているシステム モニターが一覧表示されます。
* Data Infrastructure Insightsには、システム監視グループもいくつか表示されます。これには、link:task_system_monitors.html["システム定義モニター"] ONTAPインフラストラクチャおよびワークロード モニターなど。



NOTE: カスタム モニターは、一時停止、再開、削除、または別のグループに移動できます。システム定義のモニターは一時停止および再開できますが、削除または移動することはできません。



=== サスペンドモニター

このグループは、Data Infrastructure Insights が1 つ以上のモニターを一時停止している場合にのみ表示されます。過剰なアラートや継続的なアラートが生成されている場合、モニターは一時停止されることがあります。モニターがカスタム モニターの場合は、継続的なアラートを防止するために条件を変更してから、モニターを再開します。一時停止の原因となった問題が解決されると、モニターは一時停止中のモニター グループから削除されます。



=== システム定義モニター

モニターに必要なデバイスやログの可用性が環境に含まれている限り、これらのグループには、 Data Infrastructure Insightsによって提供されるモニターが表示されます。

システム定義のモニターは、変更したり、別のグループに移動したり、削除したりすることはできません。ただし、システム モニターを複製し、その複製を変更または移動することはできます。

システム モニターには、 ONTAPインフラストラクチャ (ストレージ、ボリュームなど) やワークロード (ログ モニターなど)、その他のグループのモニターが含まれる場合があります。  NetAppは顧客のニーズと製品の機能を継続的に評価しており、必要に応じてシステム モニターとグループを更新または追加します。



=== カスタムモニターグループ

ニーズに応じて、モニターを含む独自のグループを作成できます。たとえば、ストレージ関連のすべてのモニターのグループが必要な場合があります。

新しいカスタム モニター グループを作成するには、[*"+" 新しいモニター グループの作成*] ボタンをクリックします。グループの名前を入力し、「*グループの作成*」をクリックします。その名前で空のグループが作成されます。

グループにモニターを追加するには、[_すべてのモニター_] グループ (推奨) に移動し、次のいずれかを実行します。

* 単一のモニターを追加するには、モニターの右側にあるメニューをクリックし、[グループに追加] を選択します。モニターを追加するグループを選択します。
* モニター名をクリックしてモニターの編集ビューを開き、[モニター グループに関連付ける] セクションでグループを選択します。
+
image:Monitors_AssociateToGroup.png["グループに関連付ける"]



グループをクリックし、メニューから [グループから削除] を選択して、モニターを削除します。 _すべてのモニター_ または _カスタム モニター_ グループからモニターを削除することはできません。これらのグループからモニターを削除するには、モニター自体を削除する必要があります。


NOTE: グループからモニターを削除しても、Data Infrastructure Insightsからモニターは削除されません。モニターを完全に削除するには、モニターを選択し、[削除] をクリックします。これにより、そのアイテムは所属していたグループからも削除され、どのユーザーも利用できなくなります。

同様に、[グループに移動] を選択して、モニターを別のグループに移動することもできます。

グループ内のすべてのモニターを一度に一時停止または再開するには、グループのメニューを選択し、[一時停止] または [再開] をクリックします。

グループの名前を変更したり、グループを削除したりする場合にも、同じメニューを使用します。グループを削除しても、 Data Infrastructure Insightsからモニターは削除されません。モニターは引き続き [すべてのモニター] で利用できます。

image:Monitors_PauseGroup.png["グループを一時停止する"]



== システム定義モニター

Data Infrastructure Insights には、メトリックとログの両方に対するシステム定義のモニターが多数含まれています。利用可能なシステム モニターは、テナントに存在するデータ コレクターによって異なります。そのため、データ コレクターが追加されたり、その構成が変更されたりすると、 Data Infrastructure Insightsで使用できるモニターが変わる可能性があります。

表示link:task_system_monitors.html["システム定義モニター"]Data Infrastructure Insightsに含まれるモニターの説明ページ。



=== 詳細情報

* link:task_view_and_manage_alerts.html["アラートの表示と消去"]

