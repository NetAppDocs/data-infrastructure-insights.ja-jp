---
sidebar: sidebar 
permalink: task_create_webhook.html 
keywords: webhook, notification, slack, integration 
summary: パフォーマンスまたは在庫のしきい値を警告するモニターを作成する 
---
= Webhookを使用した通知
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Webhook を使用すると、ユーザーはカスタマイズされた Webhook チャネルを使用してさまざまなアプリケーションにアラート通知を送信できます。

多くの商用アプリケーションは、標準入力インターフェースとして Webhook をサポートしています。たとえば、Slack、PagerDuty、Teams、Discord はすべて Webhook をサポートしています。汎用的でカスタマイズ可能な Webhook チャネルをサポートすることで、 Data Infrastructure Insights はこれらの配信チャネルの多くをサポートできます。 Webhook に関する情報は、これらのアプリケーション Web サイトで参照できます。例えば、Slackはlink:https://api.slack.com/messaging/webhooks["この便利なガイド"]。

複数の Webhook チャネルを作成し、各チャネルを異なる目的 (個別のアプリケーション、異なる受信者など) に向けることができます。

Webhook チャネル インスタンスは、次の要素で構成されます。

|===


| Name | 一意の名前 


| URL | Webhook ターゲット URL（URL パラメータとともに _http://_ または _https://_ プレフィックスを含む） 


| 方法 | GET、POST - デフォルトはPOST 


| カスタムヘッダー | ここでカスタムヘッダー行を指定します 


| メッセージ本文 | メッセージの本文をここに入力してください 


| デフォルトのアラートパラメータ | Webhookのデフォルトパラメータを一覧表示します 


| カスタムパラメータとシークレット | カスタムパラメータとシークレットを使用すると、固有のパラメータやパスワードなどの安全な要素を追加できます。 
|===


== Webhookの作成

Data Infrastructure Insights Webhook を作成するには、*管理 > 通知* に移動し、*Webhooks* タブを選択します。

次の画像は、Slack 用に構成された Webhook の例を示しています。

image:Webhook_Example_Slack.png["Webhookの例"]

各フィールドに適切な情報を入力し、完了したら「保存」をクリックします。

「Webhook のテスト」ボタンをクリックして接続をテストすることもできます。これにより、選択したメソッドに従って、定義された URL に「メッセージ本文」（置換なし）が送信されることに注意してください。

Data Infrastructure Insights Webhook は、いくつかのデフォルト パラメータで構成されています。さらに、独自のカスタム パラメータまたはシークレットを作成することもできます。

image:Webhook_Default_Parameters.png["Data Infrastructure Insightsのデフォルトの Webhook パラメータ"]



=== パラメーター: パラメーターとは何ですか? また、どのように使用しますか?

アラート パラメータは、アラートごとに設定される動的な値です。たとえば、_%%TriggeredOn%%_ パラメータは、アラートがトリガーされたオブジェクトに置き換えられます。

任意のオブジェクト属性 (ストレージ名など) をパラメータとして Webhook に追加できます。たとえば、Webhook の説明に、次のようにボリューム名とストレージ名のパラメータを設定できます: 「ボリューム: _%%relatedObject.volume.name%%_、ストレージ: _%%relatedObject.storage.name%%_ の待機時間が長い」。

このセクションでは、「Webhook をテスト」ボタンをクリックしたときに置換は実行されないことに注意してください。ボタンは、_%%_ 置換を示すペイロードを送信しますが、データに置き換えません。



=== カスタムパラメータとシークレット

このセクションでは、必要なカスタム パラメータやシークレットを追加できます。セキュリティ上の理由から、シークレットが定義されている場合、この Webhook チャネルを変更できるのは Webhook 作成者のみです。他のユーザーにとっては読み取り専用となります。  URL/ヘッダーでは、_%%<secret_name>%%_ のようにシークレットを使用できます。



=== Webhooksリストページ

Webhook リスト ページには、名前、作成者、作成日、ステータス、セキュリティ、最終報告のフィールドが表示されます。



== モニターでWebhook通知を選択する

ウェブフック通知を選択するにはlink:task_create_monitor.html["monitor"]、*アラート > モニターの管理* に移動して目的のモニターを選択するか、新しいモニターを追加します。 _チーム通知の設定_ セクションで、配信方法として _Webhook_ を選択します。アラート レベル (重大、警告、解決済み) を選択し、目的の Webhook を選択します。

image:Webhook_Monitor_Notify.png["Webhookモニター通知"]



== Webhook の例:

Webhooksのlink:task_webhook_example_slack.html["スラック"]Webhooksのlink:task_webhook_example_pagerduty.html["ページャーデューティ"]Webhooksのlink:task_webhook_example_teams.html["チーム"]Webhooksのlink:task_webhook_example_discord.html["不和"]
