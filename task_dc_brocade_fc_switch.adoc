---
sidebar: sidebar 
permalink: task_dc_brocade_fc_switch.html 
keywords: data collector, Brocade, FC switch, 
summary: Brocade FC スイッチ データ コレクターを構成します。 
---
= Brocade FCスイッチデータコレクター
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Data Infrastructure Insights は、 Brocade FC スイッチ (SSH) データ ソースを使用して、Factored Operating System (FOS) ファームウェア 4.2 以降を実行しているBrocadeまたはブランド変更されたスイッチ デバイスのインベントリを検出します。  FC スイッチ モードとアクセス ゲートウェイ モードの両方のデバイスがサポートされています。



== 用語

Data Infrastructure Insights は、 Brocade FC スイッチ データ コレクターから次のインベントリ情報を取得します。 Data Infrastructure Insightsによって取得された資産タイプごとに、その資産に使用される最も一般的な用語が表示されます。このデータ コレクターを表示またはトラブルシューティングするときは、次の用語に留意してください。

[cols="2*"]
|===
| ベンダー/モデル用語 | Data Infrastructure Insights用語 


| スイッチ | スイッチ 


| ポート | ポート 


| 仮想ファブリック、物理ファブリック | ファブリック 


| ゾーン | ゾーン 


| 論理スイッチ | 論理スイッチ 


| 仮想ボリューム | Volume 


| LSANゾーン | IVRゾーン 
|===
注: これらは一般的な用語のマッピングのみであり、このデータ コレクターのすべてのケースを反映しているわけではありません。



== 要件

* Data Infrastructure Insights Acquisition Unit (AU) は、 Brocadeスイッチの TCP ポート 22 への接続を開始して、インベントリ データを収集します。  AU は、パフォーマンス データを収集するために UDP ポート 161 への接続も開始します。
* ファブリック内のすべてのスイッチに IP 接続する必要があります。  [ファブリック内のすべてのスイッチを検出する] チェック ボックスをオンにすると、 Data Infrastructure Insights はファブリック内のすべてのスイッチを識別します。ただし、これらの追加スイッチを検出するには、それらのスイッチへの IP 接続が必要です。
* ファブリック内のすべてのスイッチでグローバルに同じアカウントが必要です。アクセスを確認するには、PuTTY (オープンソースのターミナルエミュレーター) を使用できます。
* SNMP パフォーマンス ポーリングを行うには、ファブリック内のすべてのスイッチに対してポート 161 と 162 が開いている必要があります。
* SNMP読み取り専用コミュニティ文字列




== 構成

[cols="2*"]
|===
| フィールド | 説明 


| スイッチIP | EFCサーバーのIPアドレスまたは完全修飾ドメイン名 


| ユーザー名 | スイッチのユーザー名 


| パスワード | スイッチのパスワード 


| SNMP | SNMPバージョン 


| SNMPコミュニティ文字列 | スイッチへのアクセスに使用されるSNMP読み取り専用コミュニティ文字列 


| SNMPユーザー名 | SNMPユーザー名 


| SNMP パスワード | SNMPのパスワード 
|===


== 高度な設定

[cols="2*"]
|===
| フィールド | 説明 


| 生地名 | データ コレクターによって報告されるファブリック名。ファブリック名を WWN として報告するには空白のままにします。 


| インベントリポーリング間隔（分） | インベントリ ポーリングの間隔。デフォルトは 15 です。 


| 除外されたデバイス | ポーリングから除外するデバイス ID のコンマ区切りリスト 


| 管理ドメインがアクティブ | 管理ドメインを使用する場合に選択 


| MPRデータの取得 | マルチプロトコル ルータからルーティング データを取得する場合に選択します。 


| トラッピングを有効にする | デバイスから SNMP トラップを受信したときに取得を有効にする場合に選択します。トラッピングを有効にする場合は、SNMP も有効にする必要があります。 


| トラップ間の最小時間（秒） | トラップによってトリガーされる取得試行間の最小時間。デフォルトは 10 です。 


| ファブリック内のすべてのスイッチを検出する | ファブリック内のすべてのスイッチを検出するには選択します 


| HBA を優先するかゾーン エイリアスを優先するかを選択する | HBA またはゾーン エイリアスのどちらを優先するかを選択します 


| パフォーマンスポーリング間隔（秒） | パフォーマンス ポーリングの間隔。デフォルトは 300 です。 


| SNMP認証プロトコル | SNMP認証プロトコル（SNMP v3のみ） 


| SNMPプライバシーパスワード | SNMP プライバシー パスワード (SNMP v3 のみ) 


| SNMP再試行 | SNMP再試行回数 
|===


== トラブルシューティング

このデータ コレクターで問題が発生した場合に試すことができるいくつかのこと:



=== インベントリ

[cols="2*"]
|===
| 問題： | これを試してください: 


| Brocadeデータソースのインベントリ取得が次のエラーで失敗しました: <日付> <時刻> ERROR [com.onaro.sanscreen.acquisition.framework.datasource.BaseDataSource] エラー 2 / 2: <データソース名> [内部エラー] - デバイス <IP> のモデルを生成できません。エラー検出プロンプト ([デバイス名 <name>]: デバイス <IP> のモデルを生成できません。エラー検出プロンプト） | この問題は、 Brocadeスイッチがプロンプトを返すまでに時間がかかり、デフォルトのタイムアウトである 5 秒を超えた場合に発生する可能性があります。  Data Infrastructure Insightsのデータ コレクターの詳細構成設定で、_SSH バナー待機タイムアウト (秒)_ の値を高くしてみてください。 


| エラー: 「Data Infrastructure Insights が無効なシャーシ ロールを受信しました」 | このデータ ソースで構成されたユーザーにシャーシ ロール権限が付与されていることを確認します。 


| エラー:「シャーシの IP アドレスが一致しません」 | DII は、原則として、取得ユニットとデバイス間のネットワーク アドレス変換またはポート アドレス変換をサポートしません。  DII は、コレクター構成内のホスト名/IP アドレスが、デバイスが認識しているアドレスのいずれとも一致しないことを検出している可能性があります。 


| アクセスゲートウェイポートに1つ以上のノードがログインしているというメッセージを受信する | NPV デバイスが正しく動作していること、および接続されているすべての WWN が想定されていることを確認します。 NPV デバイスを直接取得しないでください。代わりに、コア ファブリック スイッチを取得すると、NPV デバイス データが収集されます。 


| エラー: ....ログインの最大リモート セッション数... | FOS では、ユーザー ロールごとにサポートされる同時 SSH セッションの数に異なる制限があります。これらの制限に違反しているため、このデバイスへの DII の SSH セッションはログイン時に拒否されます。これは、同じ資産を発見したコレクターが重複していることを示す兆候である可能性があり、これを避ける必要があります。 
|===


=== パフォーマンス

[cols="2*"]
|===
| 問題： | これを試してください: 


| 「SNMP 要求の送信中にタイムアウトしました」というエラーでパフォーマンス収集が失敗します。 | クエリ変数とスイッチ構成によっては、一部のクエリがデフォルトのタイムアウトを超える場合があります。link:https://kb.netapp.com/Cloud/ncds/nds/dii/dii_kbs/Data_Infrastructure_Insights_Brocade_data_source_fails_performance_collection_with_a_timeout_due_to_default_SNMP_configuration["詳細情報"] 。 


| パフォーマンス収集が失敗し、「...SNMP テーブルに行の重複が見つかりました...」というメッセージが表示される | DII は不正な SNMP 応答を検出しました。おそらく FOS 8.2.3e を実行していると思われます。  8.2.3e2 以上にアップグレードしてください。 


| パフォーマンス収集が「...不明なユーザー名...」で失敗しました | DII コレクターを、SNMPv3 ユーザー スロットの 1 つに挿入されていない「SNMP ユーザー名」値で構成しました。  Brocade FOS でユーザーを作成しただけでは、必ずしも SNMPv3 ユーザーとして有効になるわけではありません。v3 ユーザー スロットの 1 つに配置する必要があります。 


| パフォーマンス収集が「...サポートされていないセキュリティ レベル...」で失敗します | DII コレクターを SNMPv3 を使用するように構成しましたが、問題のデバイスでは暗号化 (プライバシーとも呼ばれます) や認証の設定が有効になっていません。 


| パフォーマンス収集が失敗しました...空のプライバシー パスワードは、プライバシー プロトコル NONE でのみ許可されます | DIIコレクターを暗号化（別名プライバシープロトコル（AESなど））付きのSNMPv3を使用するように構成しましたが、「SNMPプライバシーパスワード」値が空であるため、DIIはこのデバイスと暗号化されたSNMPv3データフローをネゴシエートできません。 


| パフォーマンス収集が .....VF:nn、エラー: アクセスなし... で失敗しました | 複数の仮想ファブリックが有効になっているデバイスで SNMPv3 を使用するように DII コレクターを構成しましたが、SNMPv3 ユーザーに VF NN の権限がありません。  DII は物理資産の部分的な検出をサポートしていません。DII は常に特定の物理デバイス上の既存の VF のパフォーマンス データを取得しようとするため、常に 128 個の可能な VF すべてに DII アクセスを許可する必要があります。 
|===
追加情報は以下からご覧いただけます。link:concept_requesting_support.html["サポート"]ページまたはlink:reference_data_collector_support_matrix.html["データコレクターサポートマトリックス"]。
