---
sidebar: sidebar 
permalink: task_dc_vmware.html 
keywords: data collector, VMware, 
summary: VMware データ コレクターを構成します。 
---
= VMware VSphere データコレクターの構成
:hardbreaks:
:allow-uri-read: 


[role="lead"]
VMware vSphere のデータ コレクターは、VM ゲストおよび ESXi ホストのパフォーマンスと構成情報を収集し、vSphere 内のすべてのオブジェクトに対する読み取り専用権限を必要とします。  2024 年 8 月現在、vSphere コレクターは vSphere 環境からのログ メッセージと、VMware 固有のメトリックも追加で取得します。 Data Infrastructure Insights は、 vSphere 8.0.1 以降の環境からのみ VMware ログ情報を取得できることに注意してください。同様に、ベンダー固有のメトリックは vSphere 7 以降の環境でのみサポートされます。そのため、特定のコレクターが古い vS​​phere インスタンスを指している場合は、そのコレクターのログやベンダー固有のメトリックのチェックボックスを無効にすることをお勧めします。



== 用語

Data Infrastructure Insights は、 VMware vSphere データ コレクターから次のインベントリ情報を取得します。取得した資産の種類ごとに、その資産に使用される最も一般的な用語が表示されます。このデータ コレクターを表示またはトラブルシューティングするときは、次の用語に留意してください。

[cols="2*"]
|===
| ベンダー/モデル用語 | Data Infrastructure Insights用語 


| 仮想ディスク | ディスク 


| ホスト | ホスト 


| 仮想マシン | 仮想マシン 


| データストア | データストア 


| LUN | Volume 


| ファイバーチャネルポート | ポート 
|===
これらは一般的な用語のマッピングのみであり、このデータ コレクターのすべてのケースを反映しているわけではありません。



== 要件

このデータ コレクターを構成するには、次の情報が必要です。

* Virtual CenterサーバーのIPアドレス
* 仮想センターの読み取り専用のユーザー名とパスワード
* Virtual Center 内のすべてのオブジェクトに対する読み取り専用権限が必要です。
* Virtual Center サーバー上の SDK アクセス – 通常はすでに設定されています。
* ポート要件: http-80 https-443
* アクセスを検証:
+
** 上記のユーザー名とパスワードを使用してVirtual Centerクライアントにログインします。
** SDKが有効になっていることを確認します: telnet <vc_ip> 443






== セットアップと接続

[cols="2*"]
|===
| フィールド | 説明 


| Name | データコレクターの一意の名前 


| 買収ユニット | 買収ユニット名 
|===


== 構成

[cols="2*"]
|===
| フィールド | 説明 


| 仮想センターIPアドレス | 仮想センターのIPアドレス 


| ユーザ名 | 仮想センターへのアクセスに使用するユーザー名 


| パスワード | 仮想センターにアクセスするために使用するパスワード 
|===


== 高度な設定

詳細構成画面で、*VM パフォーマンス* ボックスをオンにしてパフォーマンス データを収集します。インベントリ収集はデフォルトで有効になっています。次のフィールドを設定できます。

[cols="2*"]
|===


| フィールド | 説明 


| インベントリポーリング間隔（分） | デフォルトは20です 


| VMをフィルタリングする | クラスタ、データセンター、またはESXホストを選択 


| リストを指定するには「除外」または「含める」を選択します | フィルター リスト (CLUSTER、DATACENTER、ESX_HOST) を作成します。 


| 再試行回数 | デフォルトは3です 


| 通信ポート | デフォルトは443です 


| デバイス リストをフィルター... | このリストは完全に一致する文字列で構成されている必要があります。ESX_HOST でフィルタリングする場合は、 Data Infrastructure Insightsと vSphere の両方で報告される ESX ホストの正確な「名前」のコンマ区切りリストを作成する必要があります。これらの「名前」は、IP アドレス、単純なホスト名、または完全修飾ドメイン名 (FQDN) のいずれかになります。これは、これらのホストが最初に vSphere に追加されたときにどのように命名されたかによって決まります。  CLUSTER でフィルタリングする場合は、ハイパーバイザー上の CI によって報告されるData Infrastructure Insightsスタイルのクラスター名を使用します - Data Infrastructure Insights はvSphere クラスター名の前に vSphere データセンター名とスラッシュを追加します - 「DC1/clusterA」は、データセンター DC1 内の clusterA のハイパーバイザーについてData Infrastructure Insightsが報告するクラスター名です。 


| パフォーマンスポーリング間隔（秒） | デフォルトは300です 
|===


== VMware タグをData Infrastructure Insights のアノテーションにマッピングする

VMware データ コレクターを使用すると、VMware で構成されたタグを使用して、 Data Infrastructure Insights の注釈を入力できます。  DII アノテーション名は VMware *カテゴリ* 名と同一である必要があります。タグは、カテゴリと同じ名前の DII アノテーションのアノテーション値として適用されます。 Data Infrastructure Insights は、常に同じ名前のテキスト タイプの注釈を入力し、他のタイプ (数値、ブール値など) の注釈を入力するように「最善の試み」を行います。注釈が別のタイプであり、データ コレクターが注釈を入力できない場合は、注釈を削除してテキスト タイプとして再作成する必要がある場合があります。

VMware タグでは大文字と小文字が区別される場合がありますが、 Data Infrastructure Insightsタグでは大文字と小文字は区別されないことに注意してください。したがって、 Data Infrastructure Insightsで「OWNER」という名前の注釈を作成し、VMware で「OWNER」、「Owner」、「owner」という名前のタグを作成すると、「owner」のこれらすべてのバリエーションが Cloud Insight の「OWNER」注釈にマッピングされます。

次の事項に注意してください。

* Data Infrastructure Insights は現在、 NetAppデバイスのサポート情報のみを自動公開します。
* このサポート情報は注釈形式で保持されるため、クエリを実行したり、ダッシュボードで使用したりできます。
* ユーザーが注釈の値を上書きまたは空にした場合、 Data Infrastructure Insightsが注釈を更新するときに (1 日に 1 回)、値が再度自動入力されます。




== トラブルシューティング

このデータ コレクターで問題が発生した場合に試すことができるいくつかのこと:



=== インベントリ

[cols="2*"]
|===
| 問題： | これを試してください: 


| エラー: VM をフィルタリングするための包含リストは空にできません | 包含リストを選択した場合は、VM をフィルタリングするために有効なデータセンター、クラスタ、またはホスト名をリストしてください。 


| エラー: IP の VirtualCenter への接続をインスタンス化できませんでした | 考えられる解決策: * 入力した資格情報と IP アドレスを確認します。  * VMware Infrastructure Client を使用して Virtual Center との通信を試みます。  * 管理対象オブジェクト ブラウザー (MOB など) を使用して仮想センターとの通信を試みます。 


| エラー: IP の VirtualCenter には、JVM に必要な非準拠の証明書があります | 考えられる解決策: * 推奨: より強力な (例: 1024 ビット) RSA キーを使用して、Virtual Center の証明書を再生成します。 * 非推奨: JVM java.security 構成を変更して、制約 jdk.certpath.disabledAlgorithms を活用し、512 ビットの RSA キーを許可します。見るlink:http://www.oracle.com/technetwork/java/javase/7u40-relnotes-2004172.html["JDK 7 アップデート 40 リリースノート"] 。 


| 「VMware ログ パッケージは、VMware バージョン 8.0.1 未満ではサポートされていません」というメッセージが表示されます。 | ログ収集は、VMware バージョン 8.0.1 より前ではサポートされていません。 Data Infrastructure Insights内のログ収集機能を使用する場合は、VI Center Infrastructure をバージョン 8.0.1 以降にアップグレードしてください。詳細については、こちらをご覧くださいlink:https://kb.netapp.com/Cloud/ncds/nds/dii/dii_kbs/Data_Infrastructure_Insights_Brocade_data_source_fails_performance_collection_with_a_timeout_due_to_default_SNMP_configuration["こちらの技術情報"]。 
|===
追加情報は以下からご覧いただけます。link:concept_requesting_support.html["サポート"]ページまたはlink:reference_data_collector_support_matrix.html["データコレクターサポートマトリックス"]。
